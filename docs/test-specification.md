# 営業日報システム テスト仕様書

## 1. テスト概要

### 1.1 テスト目的
本テスト仕様書は、営業日報システムの品質を保証するためのテストケースを定義する。

### 1.2 テスト範囲

| テスト種別 | 対象 | 概要 |
|-----------|------|------|
| 単体テスト | API、ビジネスロジック | 各機能の正常系・異常系テスト |
| 結合テスト | API連携、DB連携 | コンポーネント間の連携テスト |
| E2Eテスト | 画面操作 | ユーザー操作シナリオに基づくテスト |

### 1.3 テスト環境

| 項目 | 内容 |
|------|------|
| テスト環境 | ステージング環境 |
| テストデータ | テスト用シードデータを使用 |
| ブラウザ | Chrome（最新版）、Firefox（最新版）、Safari（最新版） |

---

## 2. テストケース一覧

### 2.1 認証機能

#### TC-AUTH-001: ログイン機能

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-AUTH-001-01 | 正常ログイン | 有効なユーザーが存在する | 1. ログイン画面を開く<br>2. 正しいメールアドレスを入力<br>3. 正しいパスワードを入力<br>4. ログインボタンをクリック | ダッシュボード画面に遷移する | 高 |
| 2 | TC-AUTH-001-02 | メールアドレス未入力 | - | 1. ログイン画面を開く<br>2. メールアドレスを空欄にする<br>3. パスワードを入力<br>4. ログインボタンをクリック | 「メールアドレスを入力してください」エラーが表示される | 高 |
| 3 | TC-AUTH-001-03 | パスワード未入力 | - | 1. ログイン画面を開く<br>2. メールアドレスを入力<br>3. パスワードを空欄にする<br>4. ログインボタンをクリック | 「パスワードを入力してください」エラーが表示される | 高 |
| 4 | TC-AUTH-001-04 | 不正なメールアドレス形式 | - | 1. ログイン画面を開く<br>2. 「test」と入力（@なし）<br>3. パスワードを入力<br>4. ログインボタンをクリック | 「メールアドレスの形式が正しくありません」エラーが表示される | 中 |
| 5 | TC-AUTH-001-05 | 存在しないユーザー | - | 1. ログイン画面を開く<br>2. 存在しないメールアドレスを入力<br>3. パスワードを入力<br>4. ログインボタンをクリック | 「メールアドレスまたはパスワードが正しくありません」エラーが表示される | 高 |
| 6 | TC-AUTH-001-06 | パスワード誤り | 有効なユーザーが存在する | 1. ログイン画面を開く<br>2. 正しいメールアドレスを入力<br>3. 誤ったパスワードを入力<br>4. ログインボタンをクリック | 「メールアドレスまたはパスワードが正しくありません」エラーが表示される | 高 |
| 7 | TC-AUTH-001-07 | 無効化されたユーザー | is_active=falseのユーザーが存在する | 1. ログイン画面を開く<br>2. 無効ユーザーのメールアドレスを入力<br>3. 正しいパスワードを入力<br>4. ログインボタンをクリック | 「このアカウントは無効化されています」エラーが表示される | 中 |

#### TC-AUTH-002: ログアウト機能

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-AUTH-002-01 | 正常ログアウト | ログイン済み | 1. ヘッダーのログアウトボタンをクリック | ログイン画面に遷移する | 高 |
| 2 | TC-AUTH-002-02 | ログアウト後のアクセス制限 | ログアウト済み | 1. ログアウトする<br>2. ブラウザの戻るボタンをクリック | ログイン画面にリダイレクトされる | 高 |

---

### 2.2 日報機能

#### TC-REPORT-001: 日報一覧表示

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-REPORT-001-01 | 一覧表示（一般営業） | 自分の日報が複数存在する | 1. 日報一覧画面を開く | 自分の日報のみが一覧表示される | 高 |
| 2 | TC-REPORT-001-02 | 一覧表示（上長） | 部下の日報が存在する | 1. 上長アカウントでログイン<br>2. 日報一覧画面を開く | 自分と部下の日報が一覧表示される | 高 |
| 3 | TC-REPORT-001-03 | 期間検索 | 複数日の日報が存在する | 1. 日報一覧画面を開く<br>2. 期間を指定<br>3. 検索ボタンをクリック | 指定期間の日報のみ表示される | 中 |
| 4 | TC-REPORT-001-04 | ステータス検索 | 各ステータスの日報が存在する | 1. 日報一覧画面を開く<br>2. ステータス「提出済」を選択<br>3. 検索ボタンをクリック | 提出済の日報のみ表示される | 中 |
| 5 | TC-REPORT-001-05 | 担当者検索（上長） | 部下の日報が存在する | 1. 上長アカウントでログイン<br>2. 日報一覧画面を開く<br>3. 担当者を選択<br>4. 検索ボタンをクリック | 選択した担当者の日報のみ表示される | 中 |
| 6 | TC-REPORT-001-06 | ページネーション | 21件以上の日報が存在する | 1. 日報一覧画面を開く<br>2. 次ページをクリック | 2ページ目の日報が表示される | 低 |

#### TC-REPORT-002: 日報作成

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-REPORT-002-01 | 日報新規作成（下書き保存） | 本日の日報が存在しない | 1. 日報作成画面を開く<br>2. 報告日を選択<br>3. 訪問記録を1件追加<br>4. 課題・相談事項を入力<br>5. 明日の予定を入力<br>6. 下書き保存ボタンをクリック | 日報が下書きステータスで保存され、一覧画面に遷移する | 高 |
| 2 | TC-REPORT-002-02 | 日報新規作成（提出） | 本日の日報が存在しない | 1. 日報作成画面を開く<br>2. 必要事項を入力<br>3. 訪問記録を1件以上追加<br>4. 提出ボタンをクリック | 日報が提出済ステータスで保存される | 高 |
| 3 | TC-REPORT-002-03 | 訪問記録の複数追加 | - | 1. 日報作成画面を開く<br>2. 行追加ボタンを3回クリック<br>3. 各行に訪問記録を入力 | 3件の訪問記録が追加できる | 高 |
| 4 | TC-REPORT-002-04 | 訪問記録の削除 | 訪問記録が2件追加されている | 1. 1件目の削除ボタンをクリック | 1件目が削除され、2件目のみ残る | 中 |
| 5 | TC-REPORT-002-05 | 顧客選択 | 顧客マスタにデータが存在する | 1. 日報作成画面を開く<br>2. 顧客名のセレクトボックスをクリック | 有効な顧客一覧が表示される | 高 |
| 6 | TC-REPORT-002-06 | 重複日付エラー | 本日の日報が既に存在する | 1. 日報作成画面を開く<br>2. 既存日報と同じ日付を選択<br>3. 保存ボタンをクリック | 「指定日の日報は既に存在します」エラーが表示される | 高 |
| 7 | TC-REPORT-002-07 | 訪問記録なしで提出 | - | 1. 日報作成画面を開く<br>2. 訪問記録を入力しない<br>3. 提出ボタンをクリック | 「訪問記録を1件以上入力してください」エラーが表示される | 高 |
| 8 | TC-REPORT-002-08 | 訪問内容未入力 | - | 1. 日報作成画面を開く<br>2. 顧客を選択<br>3. 訪問内容を空欄にする<br>4. 保存ボタンをクリック | 「訪問内容を入力してください」エラーが表示される | 高 |
| 9 | TC-REPORT-002-09 | キャンセル | 入力途中 | 1. 日報作成画面で入力を行う<br>2. キャンセルボタンをクリック<br>3. 確認ダイアログでOKをクリック | 入力内容が破棄され、一覧画面に遷移する | 中 |

#### TC-REPORT-003: 日報編集

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-REPORT-003-01 | 下書き日報の編集 | 下書きステータスの日報が存在する | 1. 日報一覧から編集ボタンをクリック<br>2. 内容を変更<br>3. 下書き保存ボタンをクリック | 変更内容が保存される | 高 |
| 2 | TC-REPORT-003-02 | 下書きから提出 | 下書きステータスの日報が存在する | 1. 日報編集画面を開く<br>2. 提出ボタンをクリック | ステータスが「提出済」に変更される | 高 |
| 3 | TC-REPORT-003-03 | 提出済日報の編集不可 | 提出済ステータスの日報が存在する | 1. 日報一覧画面を開く | 提出済日報には編集ボタンが表示されない | 高 |
| 4 | TC-REPORT-003-04 | 訪問記録の追加・削除 | 下書き日報に訪問記録が1件存在 | 1. 編集画面を開く<br>2. 行追加で1件追加<br>3. 既存1件を削除<br>4. 保存 | 新規追加分のみが保存される | 中 |

#### TC-REPORT-004: 日報詳細・確認

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-REPORT-004-01 | 日報詳細表示 | 日報が存在する | 1. 日報一覧から詳細ボタンをクリック | 日報の詳細情報が表示される | 高 |
| 2 | TC-REPORT-004-02 | 訪問記録一覧表示 | 訪問記録が3件ある日報が存在 | 1. 日報詳細画面を開く | 3件の訪問記録が表示順に表示される | 高 |
| 3 | TC-REPORT-004-03 | 確認済み更新（上長） | 提出済の日報が存在する | 1. 上長アカウントでログイン<br>2. 部下の日報詳細を開く<br>3. 確認済みにするボタンをクリック | ステータスが「確認済」に変更される | 高 |
| 4 | TC-REPORT-004-04 | 確認済みボタン非表示（一般営業） | 提出済の日報が存在する | 1. 一般営業でログイン<br>2. 自分の日報詳細を開く | 確認済みにするボタンが表示されない | 高 |
| 5 | TC-REPORT-004-05 | 確認済みボタン非表示（下書き） | 下書きの日報が存在する | 1. 上長アカウントでログイン<br>2. 下書き日報の詳細を開く | 確認済みにするボタンが表示されない | 中 |

---

### 2.3 コメント機能

#### TC-COMMENT-001: コメント投稿

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-COMMENT-001-01 | コメント投稿（上長） | 部下の提出済日報が存在する | 1. 上長アカウントでログイン<br>2. 部下の日報詳細を開く<br>3. コメントを入力<br>4. コメント投稿ボタンをクリック | コメントが保存され、一覧に表示される | 高 |
| 2 | TC-COMMENT-001-02 | コメント投稿（本人） | 自分の日報にコメントがある | 1. 自分の日報詳細を開く<br>2. 返信コメントを入力<br>3. コメント投稿ボタンをクリック | コメントが保存され、一覧に表示される | 高 |
| 3 | TC-COMMENT-001-03 | 空コメント投稿 | - | 1. 日報詳細を開く<br>2. コメント欄を空欄にする<br>3. コメント投稿ボタンをクリック | 「コメントを入力してください」エラーが表示される | 中 |
| 4 | TC-COMMENT-001-04 | コメント文字数上限 | - | 1. 日報詳細を開く<br>2. 2001文字以上のコメントを入力<br>3. コメント投稿ボタンをクリック | 「コメントは2000文字以内で入力してください」エラーが表示される | 低 |

#### TC-COMMENT-002: コメント一覧表示

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-COMMENT-002-01 | コメント一覧表示 | 日報に複数コメントが存在する | 1. 日報詳細画面を開く | コメントが投稿日時順に表示される | 高 |
| 2 | TC-COMMENT-002-02 | コメント投稿者表示 | 複数人のコメントが存在する | 1. 日報詳細画面を開く | 各コメントに投稿者名と投稿日時が表示される | 高 |

---

### 2.4 顧客マスタ機能

#### TC-CUSTOMER-001: 顧客一覧

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-CUSTOMER-001-01 | 顧客一覧表示 | 顧客データが存在する | 1. 顧客マスタ一覧画面を開く | 顧客一覧が表示される | 高 |
| 2 | TC-CUSTOMER-001-02 | 会社名検索 | 複数の顧客データが存在する | 1. 顧客マスタ一覧画面を開く<br>2. 会社名に「株式会社A」を入力<br>3. 検索ボタンをクリック | 「株式会社A」を含む顧客のみ表示される | 中 |
| 3 | TC-CUSTOMER-001-03 | 有効フラグ検索 | 有効・無効の顧客が存在する | 1. 顧客マスタ一覧画面を開く<br>2. ステータス「有効のみ」を選択<br>3. 検索ボタンをクリック | 有効な顧客のみ表示される | 中 |

#### TC-CUSTOMER-002: 顧客登録

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-CUSTOMER-002-01 | 顧客新規登録 | 上長または管理者でログイン | 1. 顧客マスタ一覧から新規登録ボタンをクリック<br>2. 会社名を入力<br>3. その他項目を入力<br>4. 保存ボタンをクリック | 顧客が登録され、一覧画面に遷移する | 高 |
| 2 | TC-CUSTOMER-002-02 | 会社名未入力 | - | 1. 顧客登録画面を開く<br>2. 会社名を空欄にする<br>3. 保存ボタンをクリック | 「会社名を入力してください」エラーが表示される | 高 |
| 3 | TC-CUSTOMER-002-03 | 一般営業の登録権限なし | 一般営業でログイン | 1. 顧客マスタ一覧画面を開く | 新規登録ボタンが表示されない | 高 |

#### TC-CUSTOMER-003: 顧客編集

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-CUSTOMER-003-01 | 顧客情報編集 | 顧客データが存在する、上長でログイン | 1. 顧客マスタ一覧から編集ボタンをクリック<br>2. 会社名を変更<br>3. 保存ボタンをクリック | 変更内容が保存される | 高 |
| 2 | TC-CUSTOMER-003-02 | 顧客無効化 | 顧客データが存在する | 1. 顧客編集画面を開く<br>2. ステータスを「無効」に変更<br>3. 保存ボタンをクリック | 顧客が無効化される | 高 |
| 3 | TC-CUSTOMER-003-03 | 一般営業の編集権限なし | 一般営業でログイン | 1. 顧客マスタ一覧画面を開く | 編集ボタンが表示されない | 高 |

---

### 2.5 営業担当者マスタ機能

#### TC-SALESPERSON-001: 営業担当者一覧

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-SALESPERSON-001-01 | 一覧表示（管理者） | 管理者でログイン | 1. 営業マスタ一覧画面を開く | 営業担当者一覧が表示される | 高 |
| 2 | TC-SALESPERSON-001-02 | アクセス制限（一般営業） | 一般営業でログイン | 1. 営業マスタメニューをクリック | メニューが表示されない、またはアクセス拒否される | 高 |
| 3 | TC-SALESPERSON-001-03 | アクセス制限（上長） | 上長でログイン（管理者権限なし） | 1. 営業マスタメニューをクリック | メニューが表示されない、またはアクセス拒否される | 高 |

#### TC-SALESPERSON-002: 営業担当者登録

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-SALESPERSON-002-01 | 新規登録 | 管理者でログイン | 1. 営業マスタ一覧から新規登録ボタンをクリック<br>2. 必要事項を入力<br>3. 保存ボタンをクリック | 営業担当者が登録される | 高 |
| 2 | TC-SALESPERSON-002-02 | メールアドレス重複 | 既存のメールアドレスが存在する | 1. 営業担当者登録画面を開く<br>2. 既存と同じメールアドレスを入力<br>3. 保存ボタンをクリック | 「このメールアドレスは既に使用されています」エラーが表示される | 高 |
| 3 | TC-SALESPERSON-002-03 | 必須項目未入力 | - | 1. 営業担当者登録画面を開く<br>2. 氏名を空欄にする<br>3. 保存ボタンをクリック | 「氏名を入力してください」エラーが表示される | 高 |
| 4 | TC-SALESPERSON-002-04 | 上長設定 | 上長候補が存在する | 1. 営業担当者登録画面を開く<br>2. 上長を選択<br>3. 保存ボタンをクリック | 上長が設定された状態で登録される | 中 |

#### TC-SALESPERSON-003: 営業担当者編集

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-SALESPERSON-003-01 | 情報編集 | 営業担当者データが存在する | 1. 営業マスタ一覧から編集ボタンをクリック<br>2. 氏名を変更<br>3. 保存ボタンをクリック | 変更内容が保存される | 高 |
| 2 | TC-SALESPERSON-003-02 | パスワード変更 | 営業担当者データが存在する | 1. 営業担当者編集画面を開く<br>2. 新しいパスワードを入力<br>3. 保存ボタンをクリック | パスワードが変更される | 高 |
| 3 | TC-SALESPERSON-003-03 | パスワード未変更 | 営業担当者データが存在する | 1. 営業担当者編集画面を開く<br>2. パスワードを空欄にする<br>3. 保存ボタンをクリック | パスワードは変更されず、他の項目のみ更新される | 中 |
| 4 | TC-SALESPERSON-003-04 | 無効化 | 営業担当者データが存在する | 1. 営業担当者編集画面を開く<br>2. ステータスを「無効」に変更<br>3. 保存ボタンをクリック | 営業担当者が無効化される | 高 |

---

### 2.6 ダッシュボード機能

#### TC-DASHBOARD-001: ダッシュボード表示

| No | テストケースID | テスト項目 | 事前条件 | テスト手順 | 期待結果 | 優先度 |
|----|---------------|-----------|----------|-----------|----------|--------|
| 1 | TC-DASHBOARD-001-01 | 本日の日報ステータス表示（未作成） | 本日の日報が存在しない | 1. ダッシュボードを開く | 「本日の日報: 未作成」と表示される | 高 |
| 2 | TC-DASHBOARD-001-02 | 本日の日報ステータス表示（下書き） | 本日の日報が下書きで存在 | 1. ダッシュボードを開く | 「本日の日報: 下書き」と表示される | 高 |
| 3 | TC-DASHBOARD-001-03 | 本日の日報ステータス表示（提出済） | 本日の日報が提出済で存在 | 1. ダッシュボードを開く | 「本日の日報: 提出済」と表示される | 高 |
| 4 | TC-DASHBOARD-001-04 | 未読コメント数表示 | 未読コメントが3件存在 | 1. ダッシュボードを開く | 「未確認コメント: 3件」と表示される | 中 |
| 5 | TC-DASHBOARD-001-05 | 最近の日報一覧表示 | 直近7日間の日報が存在 | 1. ダッシュボードを開く | 直近の日報が一覧表示される | 高 |
| 6 | TC-DASHBOARD-001-06 | 日報作成ボタン | 本日の日報が存在しない | 1. ダッシュボードを開く<br>2. 「日報を作成」ボタンをクリック | 日報作成画面に遷移する | 高 |

---

## 3. API単体テスト

### 3.1 認証API

| No | テストケースID | API | テスト項目 | リクエスト | 期待レスポンス | 優先度 |
|----|---------------|-----|-----------|-----------|---------------|--------|
| 1 | API-AUTH-001 | POST /auth/login | 正常ログイン | email: valid, password: valid | 200 OK, access_token返却 | 高 |
| 2 | API-AUTH-002 | POST /auth/login | 不正パスワード | email: valid, password: invalid | 401 Unauthorized | 高 |
| 3 | API-AUTH-003 | POST /auth/login | 存在しないユーザー | email: notexist@example.com | 401 Unauthorized | 高 |
| 4 | API-AUTH-004 | POST /auth/logout | 正常ログアウト | Authorization: Bearer valid_token | 200 OK | 高 |
| 5 | API-AUTH-005 | GET /auth/me | ユーザー情報取得 | Authorization: Bearer valid_token | 200 OK, user情報返却 | 高 |
| 6 | API-AUTH-006 | GET /auth/me | 無効なトークン | Authorization: Bearer invalid_token | 401 Unauthorized | 高 |

### 3.2 日報API

| No | テストケースID | API | テスト項目 | リクエスト | 期待レスポンス | 優先度 |
|----|---------------|-----|-----------|-----------|---------------|--------|
| 1 | API-REPORT-001 | GET /reports | 一覧取得 | - | 200 OK, 日報リスト返却 | 高 |
| 2 | API-REPORT-002 | GET /reports | 期間フィルタ | date_from, date_to | 200 OK, フィルタ済みリスト | 中 |
| 3 | API-REPORT-003 | POST /reports | 新規作成 | 有効なデータ | 201 Created | 高 |
| 4 | API-REPORT-004 | POST /reports | 重複日付 | 既存日付 | 409 Conflict | 高 |
| 5 | API-REPORT-005 | POST /reports | バリデーションエラー | 必須項目欠落 | 422 Validation Error | 高 |
| 6 | API-REPORT-006 | GET /reports/{id} | 詳細取得 | 有効なID | 200 OK, 日報詳細返却 | 高 |
| 7 | API-REPORT-007 | GET /reports/{id} | 存在しないID | 無効なID | 404 Not Found | 高 |
| 8 | API-REPORT-008 | PUT /reports/{id} | 更新（下書き） | 有効なデータ | 200 OK | 高 |
| 9 | API-REPORT-009 | PUT /reports/{id} | 更新（提出済） | 有効なデータ | 403 Forbidden | 高 |
| 10 | API-REPORT-010 | PUT /reports/{id}/submit | 提出 | 訪問記録あり | 200 OK | 高 |
| 11 | API-REPORT-011 | PUT /reports/{id}/submit | 提出（訪問記録なし） | 訪問記録なし | 422 Validation Error | 高 |
| 12 | API-REPORT-012 | PUT /reports/{id}/confirm | 確認済み（上長） | 上長トークン | 200 OK | 高 |
| 13 | API-REPORT-013 | PUT /reports/{id}/confirm | 確認済み（一般営業） | 一般営業トークン | 403 Forbidden | 高 |
| 14 | API-REPORT-014 | DELETE /reports/{id} | 削除（下書き） | 下書きID | 200 OK | 中 |
| 15 | API-REPORT-015 | DELETE /reports/{id} | 削除（提出済） | 提出済ID | 403 Forbidden | 中 |

### 3.3 コメントAPI

| No | テストケースID | API | テスト項目 | リクエスト | 期待レスポンス | 優先度 |
|----|---------------|-----|-----------|-----------|---------------|--------|
| 1 | API-COMMENT-001 | GET /reports/{id}/comments | コメント一覧取得 | 有効な日報ID | 200 OK, コメントリスト | 高 |
| 2 | API-COMMENT-002 | POST /reports/{id}/comments | コメント投稿 | comment_text: 有効 | 201 Created | 高 |
| 3 | API-COMMENT-003 | POST /reports/{id}/comments | 空コメント | comment_text: "" | 422 Validation Error | 中 |

### 3.4 顧客API

| No | テストケースID | API | テスト項目 | リクエスト | 期待レスポンス | 優先度 |
|----|---------------|-----|-----------|-----------|---------------|--------|
| 1 | API-CUSTOMER-001 | GET /customers | 一覧取得 | - | 200 OK, 顧客リスト | 高 |
| 2 | API-CUSTOMER-002 | POST /customers | 新規登録（権限あり） | 上長トークン, 有効データ | 201 Created | 高 |
| 3 | API-CUSTOMER-003 | POST /customers | 新規登録（権限なし） | 一般営業トークン | 403 Forbidden | 高 |
| 4 | API-CUSTOMER-004 | PUT /customers/{id} | 更新 | 有効データ | 200 OK | 高 |
| 5 | API-CUSTOMER-005 | DELETE /customers/{id} | 削除（論理） | 有効ID | 200 OK | 中 |

### 3.5 営業担当者API

| No | テストケースID | API | テスト項目 | リクエスト | 期待レスポンス | 優先度 |
|----|---------------|-----|-----------|-----------|---------------|--------|
| 1 | API-SALESPERSON-001 | GET /salespersons | 一覧取得（管理者） | 管理者トークン | 200 OK | 高 |
| 2 | API-SALESPERSON-002 | GET /salespersons | 一覧取得（非管理者） | 一般営業トークン | 403 Forbidden | 高 |
| 3 | API-SALESPERSON-003 | POST /salespersons | 新規登録 | 管理者トークン, 有効データ | 201 Created | 高 |
| 4 | API-SALESPERSON-004 | POST /salespersons | メールアドレス重複 | 既存email | 409 Conflict | 高 |
| 5 | API-SALESPERSON-005 | PUT /salespersons/{id} | 更新 | 有効データ | 200 OK | 高 |

---

## 4. E2Eテストシナリオ

### 4.1 シナリオ1: 営業担当者の1日の業務フロー

**目的**: 営業担当者が日報を作成し、上長が確認するまでの一連の流れをテスト

| ステップ | 操作者 | 操作内容 | 期待結果 |
|---------|--------|---------|----------|
| 1 | 営業担当者 | ログインする | ダッシュボードが表示される |
| 2 | 営業担当者 | ダッシュボードで「日報を作成」をクリック | 日報作成画面が表示される |
| 3 | 営業担当者 | 訪問記録を2件追加する | 2件の訪問記録が追加される |
| 4 | 営業担当者 | 課題・相談事項を入力する | 入力内容が反映される |
| 5 | 営業担当者 | 明日の予定を入力する | 入力内容が反映される |
| 6 | 営業担当者 | 「提出」ボタンをクリックする | 日報が提出され、一覧画面に遷移する |
| 7 | 営業担当者 | ログアウトする | ログイン画面に遷移する |
| 8 | 上長 | ログインする | ダッシュボードが表示される |
| 9 | 上長 | 日報一覧から部下の日報を選択する | 日報詳細画面が表示される |
| 10 | 上長 | コメントを入力して投稿する | コメントが追加される |
| 11 | 上長 | 「確認済みにする」をクリックする | ステータスが「確認済」に変更される |

### 4.2 シナリオ2: 日報の下書き保存と編集

**目的**: 下書き保存した日報を後から編集・提出できることを確認

| ステップ | 操作者 | 操作内容 | 期待結果 |
|---------|--------|---------|----------|
| 1 | 営業担当者 | ログインする | ダッシュボードが表示される |
| 2 | 営業担当者 | 日報作成画面を開く | 日報作成画面が表示される |
| 3 | 営業担当者 | 訪問記録を1件入力する | 訪問記録が追加される |
| 4 | 営業担当者 | 「下書き保存」をクリックする | 日報が下書き保存され、一覧に遷移する |
| 5 | 営業担当者 | 一覧から下書き日報の「編集」をクリックする | 日報編集画面が表示される |
| 6 | 営業担当者 | 訪問記録を1件追加する | 訪問記録が2件になる |
| 7 | 営業担当者 | 課題・相談事項を入力する | 入力内容が反映される |
| 8 | 営業担当者 | 「提出」ボタンをクリックする | 日報が提出され、ステータスが「提出済」になる |

### 4.3 シナリオ3: 顧客マスタ管理

**目的**: 上長が顧客マスタを管理できることを確認

| ステップ | 操作者 | 操作内容 | 期待結果 |
|---------|--------|---------|----------|
| 1 | 上長 | ログインする | ダッシュボードが表示される |
| 2 | 上長 | 顧客マスタメニューをクリックする | 顧客一覧画面が表示される |
| 3 | 上長 | 「新規登録」をクリックする | 顧客登録画面が表示される |
| 4 | 上長 | 顧客情報を入力して保存する | 顧客が登録され、一覧に表示される |
| 5 | 上長 | 登録した顧客の「編集」をクリックする | 顧客編集画面が表示される |
| 6 | 上長 | 担当者名を変更して保存する | 変更が保存される |
| 7 | 上長 | 顧客をステータス「無効」にして保存する | 顧客が無効化される |

### 4.4 シナリオ4: 一般営業の権限制限確認

**目的**: 一般営業が権限外の操作をできないことを確認

| ステップ | 操作者 | 操作内容 | 期待結果 |
|---------|--------|---------|----------|
| 1 | 一般営業 | ログインする | ダッシュボードが表示される |
| 2 | 一般営業 | 顧客マスタ一覧を開く | 新規登録・編集ボタンが表示されない |
| 3 | 一般営業 | 営業マスタメニューを確認する | メニューが表示されない |
| 4 | 一般営業 | 他人の日報一覧を確認する | 自分の日報のみ表示される |
| 5 | 一般営業 | 自分の提出済日報を確認する | 「確認済みにする」ボタンが表示されない |

---

## 5. 非機能テスト

### 5.1 パフォーマンステスト

| No | テスト項目 | 条件 | 期待結果 | 優先度 |
|----|-----------|------|----------|--------|
| 1 | 日報一覧表示速度 | 1000件の日報データ | 3秒以内に表示完了 | 中 |
| 2 | 日報作成API応答時間 | 訪問記録10件 | 1秒以内に応答 | 中 |
| 3 | 同時ログイン | 50ユーザー同時アクセス | エラーなく処理される | 中 |

### 5.2 セキュリティテスト

| No | テスト項目 | テスト内容 | 期待結果 | 優先度 |
|----|-----------|-----------|----------|--------|
| 1 | SQLインジェクション | 入力欄にSQLを入力 | SQLが実行されない | 高 |
| 2 | XSS | スクリプトタグを入力 | スクリプトが実行されない | 高 |
| 3 | CSRF | 不正なリクエスト送信 | リクエストが拒否される | 高 |
| 4 | 認証バイパス | トークンなしでAPI呼び出し | 401エラーが返る | 高 |
| 5 | 権限昇格 | 一般営業で管理者APIを呼び出し | 403エラーが返る | 高 |

### 5.3 ブラウザ互換性テスト

| No | ブラウザ | バージョン | テスト項目 | 優先度 |
|----|---------|-----------|-----------|--------|
| 1 | Chrome | 最新版 | 全画面の表示・操作確認 | 高 |
| 2 | Firefox | 最新版 | 全画面の表示・操作確認 | 高 |
| 3 | Safari | 最新版 | 全画面の表示・操作確認 | 中 |
| 4 | Edge | 最新版 | 全画面の表示・操作確認 | 中 |

---

## 6. テスト実施記録

### 6.1 テスト実施記録表

| テストケースID | 実施日 | 実施者 | 結果 | 備考 |
|---------------|--------|--------|------|------|
| | | | | |

### 6.2 不具合管理表

| 不具合ID | 発見日 | テストケースID | 概要 | 重要度 | ステータス | 対応者 | 対応完了日 |
|---------|--------|---------------|------|--------|-----------|--------|-----------|
| | | | | | | | |

---

## 7. 付録

### 7.1 テストデータ

#### 営業担当者テストデータ

| ID | 氏名 | メールアドレス | パスワード | 上長ID | 役割 |
|----|------|---------------|-----------|--------|------|
| 1 | 管理者 | admin@example.com | admin123 | NULL | 管理者 |
| 2 | 佐藤課長 | sato@example.com | sato123 | 1 | 上長 |
| 3 | 山田太郎 | yamada@example.com | yamada123 | 2 | 一般営業 |
| 4 | 鈴木花子 | suzuki@example.com | suzuki123 | 2 | 一般営業 |
| 5 | 無効ユーザー | invalid@example.com | invalid123 | 2 | 無効 |

#### 顧客テストデータ

| ID | 会社名 | 担当者名 | 電話番号 | ステータス |
|----|--------|---------|----------|-----------|
| 1 | 株式会社A | 田中一郎 | 03-1234-5678 | 有効 |
| 2 | 株式会社B | 山本二郎 | 03-2345-6789 | 有効 |
| 3 | 株式会社C | 佐々木三郎 | 03-3456-7890 | 有効 |
| 4 | 株式会社D（無効） | 高橋四郎 | 03-4567-8901 | 無効 |
